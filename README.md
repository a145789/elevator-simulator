# 电梯模拟器

## 基础设置
- 每个楼层都有楼层数、显示当前电梯在第几层的显示屏、红黄绿三个状态灯
  - 红 -> 电梯不在此楼，上下通行中 running
  - 黄 -> 电梯在此楼，但是没有开门，等待调度 pending
  - 绿 -> 电梯在此楼开门等待人员进入 waiting
- 每个电梯有上下按钮召唤电梯，电梯响应后到达指定楼层，开门时间为 1.5s
- 开门后会等待 5s，people 可选择进入不进入，5s 后会再花 1.5s 的时间关门
- 关门期间 press 上下按钮会阻断关门
- 电梯启动会有 1.5s 的等待上下楼层的指令时间
- 刚进入时，初始化电梯状态-> 随机在任意楼层，当前可为运行状态或者等待
 
## 调度配置
- 4 部电梯初始化随机在不同楼层
- 开启一个定时器，随机 500-5000s 之间循环，在随机楼层模拟上下楼，将模拟的楼层推到一个队列
- 超过电梯限载人数不予乘坐
- 电梯运行策略
  - 当一个楼层发出上行或者下行的召唤指令后，最近的电梯前往此楼层
  - 同一楼层上行下行为两条指令，与指令为同一方向的电梯经过此楼层，消除该指令
  - 电梯没有目标楼层，接收一个召唤指令后，运行方向为前往该楼层的上下行方向
  - 运行过程中，如果遇到同方向乘客，会开门搭载此楼乘客
  - 如果乘客在电梯中按下的目标楼层与电梯方向相同，则去往该楼层
  - 如果电梯内按下与电梯方向相反的楼层，则优先送完与电梯同方向乘客，然后再送相反方向乘客
  - 如果该电梯方向没有召楼层，电梯内也无目标楼层，则即便相反方向楼层也暂停开门
  - 电梯运行或者结束运行中会检索楼层，如果没有电梯去往该楼层，则为该楼层召唤电梯
  
## 用户操作
- 点击上下行按钮召唤电梯，电梯到达乘客所在楼层后，乘客选择进入或不进入
- 进入后选择要去往的楼层
  - 选择的楼层符合预先的上下行指令，正常驶向目标楼层
  - 如果选择的楼层位置与按下的上下行按钮相反，则
    - 电梯内无乘客，直接驶向目的地
    - 若有乘客，送完符合指定上下行指令的乘客后再驶向目的地
  - 如果选择与当前楼层相同的层数，不予处理
 
